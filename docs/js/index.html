<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
    const A = [
  { id: 2, parentId: 1},
  { id: 1 },
  { id: 3, parentId: 2},
  { id: 5, parentId: 'a' },
  { id: 'a' }
]

const fn = (list = []) => {
  const res = list.reduce((p, c, i, arr) => {
    for (let i = 0; i < arr.length; i++) {
      if (arr[i].parentId === c.id) {
        p.push({
          ...c,
          child: [{...arr[i]}]
        })
        break;
      } 
    }
    p.push(c)
    // p.forEach((item) => {
    //   if (item.child) {
    //     item.child.forEach(t => {
    //       if (t.parentId === c.id) {
    //         item.child.push({
    //           ...c
    //         })
    //       }
    //     })
    //   }
    // })
    return p
  }, [])
  return res
}
console.log(fn(A))
  </script>
</body>
</html>